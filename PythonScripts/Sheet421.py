# -*- coding: utf-8 -*-
"""
Created on Sun May 21 19:21:45 2017

@author: ubuntu
"""

import numpy as np
import matplotlib.pyplot as plt
from matplotlib import rcParams
rcParams.update({'figure.autolayout': True})
rcParams['figure.figsize'] = 7, 6

#size = np.multiply(np.arange(1,11), np.power(2, 27))
tArray = np.array((32, 256, 512, 1024))
bArray = np.array((1,2,4,8))
cArray = np.array((256, 1024, 4096, 16384, 65536))
xaxis = cArray
#xaxis = (np.arange(32) +1 )* 32
#xaxis = np.power(2, np.arange(11))

#measuring results
#resultsd2hunified= np.array(((42.0468,21.0862,14.0966,10.6007,8.53908,7.15212,6.13771,5.35744,4.80669,4.35236,3.97191,3.6456,3.39006,3.15665,2.95694,2.77213,2.62678,2.49054,2.36475,2.24695,2.157,2.06565,1.98658,1.90318,1.84874,1.78628,1.72601,1.66145,1.62614,1.57729,1.53398,1.48152),(21.0883,10.5728,7.11558,5.32338,4.30665,3.62923,3.12605,2.73491,2.46135,2.22667,2.03319,1.87008,1.7465,1.62551,1.53075,1.43409,1.37455,1.30952,1.25266,1.19536,1.15847,1.11601,1.08035,1.0392,1.01555,0.980526,0.950575,0.919839,0.901532,0.87627,0.855656,0.828594),(14.0892,7.11036,4.74588,3.60701,2.91815,2.45158,2.1135,1.86185,1.67405,1.51691,1.39174,1.28797,1.21333,1.14255,1.07946,1.02149,0.978968,0.932346,0.891365,0.852514,0.828545,0.797285,0.771548,0.744572,0.73223,0.712422,0.692633,0.670884,0.65859,0.641241,0.625269,0.609007),(10.5802,5.31883,3.59741,2.71311,2.20938,1.86096,1.60617,1.41093,1.28475,1.17574,1.08562,1.00965,0.952264,0.893734,0.843507,0.799963,0.770293,0.73701,0.70941,0.683883,0.664016,0.63987,0.61824,0.597763,0.586372,0.569921,0.553578,0.53741,0.529855,0.516517,0.503108,0.469825)))


###########TODO 
#resultsh2dunified = np.array(((42.0506,21.0859,14.0977,10.6014,8.53246,7.14858,6.1336,5.35601,4.80231,4.3495,3.97016,3.64763,3.39462,3.15905,2.9595,2.77747,2.62916,2.49378,2.36778,2.2519,2.15784,2.06747,1.9887,1.90722,1.85041,1.78741,1.72702,1.66538,1.62816,1.57721,1.53363,1.48628),(21.0318,10.5737,7.11145,5.31906,4.30054,3.62079,3.12323,2.74068,2.464,2.22898,2.03305,1.87011,1.74381,1.62671,1.52915,1.43615,1.37585,1.31209,1.25409,1.20079,1.15853,1.11405,1.07511,1.03574,1.00927,0.978097,0.947257,0.92025,0.903101,0.879186,0.859407,0.834743),(14.0702,7.10753,4.74118,3.60728,2.91437,2.45552,2.11575,1.86376,1.6725,1.51784,1.39184,1.29052,1.21612,1.14104,1.07611,1.01701,0.974529,0.9302,0.89122,0.856223,0.831248,0.801768,0.773573,0.745422,0.729557,0.709002,0.688508,0.669497,0.658319,0.641678,0.625448,0.609671),(10.5662,5.31638,3.60067,2.7162,2.21142,1.85944,1.60437,1.41545,1.2864,1.17688,1.08398,1.00518,0.949749,0.894237,0.84889,0.802002,0.773029,0.738783,0.708354,0.67888,0.661314,0.639604,0.619332,0.597003,0.586632,0.570287,0.553147,0.539463,0.530637,0.516946,0.504556,0.480907)))

#resultsh2dunified = np.array(((27.7299,16.8099,12.7953,9.71136,8.15447,7.36201,6.71706,6.30663,5.92474,5.73942,5.47573,5.34291,5.16372,5.05228,4.94947,4.88315,4.80142,4.73021,4.65562,4.58154,4.53467,4.49067,4.45159,4.40729,4.38016,4.34874,4.31016,4.2565,4.23678,4.21371,4.20089,4.17431),(15.712,9.57024,7.35806,6.31578,5.6812,5.33574,5.06942,4.83868,4.68452,4.57453,4.4656,4.37136,4.31281,4.25967,4.2118,4.1547,4.1146,4.08381,4.05928,4.03125,4.00124,3.97586,3.9606,3.93657,3.91762,3.90697,4.19263,4.38573,4.37035,4.35417,4.34571,4.32338),(12.5899,7.87951,6.47778,5.82593,5.45073,5.21798,5.04363,4.91057,4.82356,4.74385,4.65987,4.60243,4.56259,4.51467,4.47736,4.44112,4.41967,4.39646,4.37785,4.3691,4.34749,4.29917,4.27366,4.25967,4.17805,4.12875,4.10472,4.09269,4.06762,4.02479,4.00222,3.97976),(10.1468,6.78956,5.8379,5.35588,5.09192,4.92732,4.78273,4.67991,4.60339,4.55782,4.10176,3.93615,3.90095,3.87738,3.85107,3.81776,3.79811,3.78606,3.73558,3.71918,3.70738,3.68763,3.67617,3.65479,3.6588,3.64589,3.64175,3.62978,3.62498,3.62223,3.61342,3.61542)))

#resultsd2hunified = np.array(((27.4427,16.8236,12.7415,10.2739,8.89178,7.88617,7.25899,6.7949,6.45912,6.21943,6.00907,5.82589,5.68535,5.58913,5.46642,5.37403,5.27113,5.22516,5.16263,5.11523,5.05342,5.00848,4.967,4.91938,4.89257,4.86409,4.84562,4.8054,4.78812,4.76841,4.72273,4.692),(16.4225,10.4789,7.86553,6.80683,6.22431,5.83598,5.56084,5.35564,5.20881,5.10242,4.98705,4.9088,4.85137,4.79202,4.74275,4.67872,4.63764,4.60028,4.56947,4.5375,4.51276,4.47654,4.46502,4.44567,4.4421,4.42853,4.41108,4.38533,4.36463,4.35223,4.34136,4.3321),(12.4166,7.87659,6.46751,5.83214,5.4549,5.21328,5.03327,4.90655,4.82403,4.73488,4.65318,4.59817,4.56007,4.51025,4.4757,4.44279,4.44013,4.4176,4.40224,4.36929,4.34087,4.29198,4.27286,4.25308,4.18865,4.12604,4.09472,4.0985,4.0771,4.02231,3.99223,3.97951),(10.0746,6.79117,5.84922,5.36458,5.09574,4.91857,4.77878,4.68733,4.61325,4.55795,4.50121,4.46023,4.41931,4.39007,4.3595,4.32837,4.26591,4.25548,4.10855,4.05533,4.07474,4.04706,4.01704,3.99084,4.01094,4.01691,3.99847,3.99005,3.99999,3.98518,3.97226,3.98275)))

#results = np.array((((0.677408,1.28083,4.31754,16.6236,65.8321),(0.581696,1.26035,4.42307,16.6347,65.4141),(0.578816,1.28339,4.19341,15.781,62.4905),(0.476672,1.25744,4.1521,15.1244,55.7451)),((0.58672,1.63622,4.8911,18.8402,73.4862),(0.598656,.43821,4.79306,18.1973,72.0267),(0.58816,1.46346,4.87738,18.2249,72.0243),(0.604128,1.45014,4.86886,18.1997,72.0932)),((0.627264,1.60682,5.47149,20.944,83.1291),(0.65648,1.60096,5.46966,20.9536,83.1196),(0.637248,1.60083,5.50893,20.9292,83.144),(0.63344,1.61146,5.53363,20.978,83.1694)),((0.724736,1.94749,6.81002,26.4999,105.662),(0.72112,1.95635,6.8192,26.6179,105.589),(0.727872,1.97629,6.89901,26.6579,106.094),(0.736768,1.98304,6.95309,26.7829,105.988))))
results = np.array((((0.680032,1.32554,4.28688,16.582,65.6776),(0.61088,1.23338,4.3940,16.5456,62.4939),(0.565728,1.29696,4.16211,15.7969,59.9413),(0.510144,1.18547,3.77994,14.1572,55.6249)),((0.576352,1.47299,4.95933,18.4633,72.0794),(0.59568,1.44358,4.79837,18.1992,72.1068),(0.599168,1.43478,4.79283,18.2353,72.0432),(0.600416,1.44995,4.8128,18.2098,72.1269)),((0.626304,1.5615,5.46925,20.9172,83.1336),(0.716832,1.60406,5.47315,20.9506,83.1111),(0.639232,1.61642,5.47619,20.9578,83.1434),(0.644448,1.60998,5.48787,20.9833,83.2001)),((0.728832,1.95114,6.87597,26.5013,105.653),(0.728832,1.9552,6.87811,26.6156,105.607),(0.726464,1.96637,6.92163,26.6568,106.035),(0.737504,1.98774,6.92589,26.7724,105.967))))                      

results = results / 10
#divide by 10 because we measured 10 times

sbpltNbmr = np.shape(bArray)[0]
rubbish, sbplts = plt.subplots(2, 2, sharex='all', sharey='all') #(sbpltNbmr)
for i in range(sbpltNbmr):
    plotNumber = i
        
    sbplts.flatten()[plotNumber].set_title("Anzahl Bloecke: " + str(bArray[i]))
    
    for lines in range(0, np.shape(results)[0]):
    
        sbplts.flatten()[plotNumber].plot(xaxis, results[lines, plotNumber, :], label = "Anzahl Threads = " + str(tArray[lines]))
        sbplts.flatten()[plotNumber].scatter(xaxis, results[lines, plotNumber, :])
            #plt.axis.Tick
        sbplts.flatten()[plotNumber].grid(linestyle='-')
        if plotNumber %2 == 1:
            sbplts.flatten()[plotNumber].legend(bbox_to_anchor=(1.05,1), loc = 2)
       # sbplts[plotNumber].set_title("N =" + str((2 ** plotNumber) * 8))

for ax in sbplts.flat:
    ax.set(xlabel="Ergebnisse pro Block", ylabel="Zeit in ms")  
#plt.xlabel("Ergebnisse pro Block")
#plt.ylabel("Zeit in MS")
plt.savefig('fig.svg', format='svg', bbox_inches='tight')
